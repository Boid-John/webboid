webpackJsonp([1],{271:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(282),n=i(283);var s=function(e){i(280)},o=i(19)(a.a,n.a,!1,s,"data-v-be32ae10",null);t.default=o.exports},279:function(e,t,i){"use strict";t.a={icon:function(e){return"BROWSER"===e.type?"tab":"DESKTOP"===e.type?"flash_on":"MOBILE"===e.type?"phone_android":"WINDOWS"===e.type?"fa-windows":"MAC"===e.type?"fa-apple":"add"},color:function(e){return"OFFLINE"===e.status?"grey":"ONLINE"===e.status?"blue":"ACTIVE"===e.status?"green":void 0}}},280:function(e,t,i){var a=i(281);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(270)("30f2a93a",a,!0)},281:function(e,t,i){(e.exports=i(269)(void 0)).push([e.i,".layout-padding[data-v-be32ae10]{max-width:700px}.taller[data-v-be32ae10]{height:60px}body[data-v-be32ae10]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}",""])},282:function(e,t,i){"use strict";var a=i(55),n=i.n(a),s=i(13),o=i.n(s),c=i(14),r=i.n(c),l=i(279);i(10);t.a={data:function(){return{loading:!0,parseDevice:l.a,deviceStatePoll:null,actionbg:{backgroundColor:"white"},activeTasks:[],thisDevice:{name:"device name",power:"",status:"",id:"",meta:{},icon:"WINDOWS",type:"WINDOWS"},deviceId:null,pending:!1,toggle:!1}},computed:{},methods:{handleLocalDevice:function(){var e=r()(o.a.mark(function e(t){var i,a,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return console.log("received blank localDevice"),window.local.ipcRenderer.send("initBoinc"),setTimeout(function(){n.init()},3e3),e.abrupt("return");case 5:if(!t.cpid){e.next=36;break}return e.prev=6,e.next=9,this.api.device.getByCpid(t.cpid).catch(console.log);case 9:if(i=e.sent){e.next=20;break}return console.log("device does not exist, User can claim device"),e.next=14,this.api.device.create((o=void 0,(s=t)?(o="Darwin"===s.os.name?"MAC":"WINDOWS",console.log(window.local.thisUser.id),{ownerId:window.local.thisUser.id,cpid:s.cpid,name:s.name,type:o,meta:s}):null));case 14:return a=e.sent,e.next=17,this.api.device.get(a.id);case 17:this.thisDevice=e.sent,e.next=29;break;case 20:if(i.owner.id!==this.thisUser.id){e.next=27;break}return console.log("this device is owned by this user"),e.next=24,this.api.device.get(i.id).catch(console.log);case 24:this.thisDevice=e.sent,e.next=29;break;case 27:this.$e.$emit("logout"),alert("This device is already claimed by a different account. ðŸ˜¢ \n \n Contact us: support@boid.com");case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(6),console.log(e.t0);case 34:e.next=38;break;case 36:this.$router.push({name:"Auth"}),alert("This device is acting up. ðŸ˜¢ \n \n Contact us: support@boid.com");case 38:case"end":return e.stop()}var s,o},e,this,[[6,31]])}));return function(t){return e.apply(this,arguments)}}(),init:function(){var e=this;window.local&&setTimeout(function(){e.handleLocalDevice(window.local.ipcRenderer.sendSync("localDevice"))},200)}},props:["thisUser","authenticated","api","thisModal","ch"],created:function(){var e=this;this.init(),window.local.ipcRenderer.on("boinc.toggle",function(t,i){console.log("GOT TOGGLE:",i),e.toggle=i})},watch:{thisDevice:function(){var e=r()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("got deviceid"),t&&(this.loading=!1,console.log(n()(this.thisDevice)),"ACTIVE"==this.thisDevice.status?this.toggle=!0:(this.toggle=!1,window.local.ipcRenderer.send("boinc.cmd","quit")),this.thisDevice.icon=l.a.icon(this.thisDevice));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),toggle:function(){var e=r()(o.a.mark(function e(t){var i,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TOGGLE STATE",t),this.pending=!0,e.prev=2,i={deviceId:this.thisDevice.id},t?(i.status="ACTIVE",this.actionbg.backgroundColor="li",window.local.ipcRenderer.send("startBoinc"),this.deviceStatePoll=setInterval(function(){console.log("request device active tasks");var e=window.local.ipcRenderer.sendSync("boinc.activeTasks");console.log(e),a.activeTasks=e||[]},1e3)):(i.status="ONLINE",this.actionbg.backgroundColor="white",window.local.ipcRenderer.send("boinc.cmd","quit"),clearInterval(this.deviceStatePoll)),e.next=7,this.api.device.updateStatus(i);case 7:e.sent,e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("error"),alert(e.t0),console.log(e.t0);case 15:return e.prev=15,e.next=18,this.api.device.get(this.thisDevice.id);case 18:return this.thisDevice=e.sent,this.pending=!1,e.finish(15);case 21:case"end":return e.stop()}},e,this,[[2,10,15,21]])}));return function(t){return e.apply(this,arguments)}}()}}},283:function(e,t,i){"use strict";var a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-transition",{attrs:{enter:"fadeIn",leave:"fadeOut"}},[e.loading?i("div",{staticClass:"layout-padding relative-position"},[i("div",{staticClass:"text-center"},[e._v("Initializing....")])]):i("div",{staticClass:"layout-padding relative-position"},[i("p",[e._v(e._s(e.thisDevice.name)+" "),i("q-icon",{staticClass:"float-lefth on-right inline",attrs:{name:e.parseDevice.icon(e.thisDevice),color:e.parseDevice.color(e.thisDevice)}})],1),i("h6",{staticClass:"light-paragraph"},[e._v("CPU "),e.toggle?i("q-icon",{staticClass:"text-center",staticStyle:{"font-size":"20px"},attrs:{color:"yellow",name:"flash_on"}}):i("q-icon",{staticClass:"text-center",staticStyle:{"font-size":"20px"},attrs:{color:"grey-4",name:"flash_off"}},[e.thisDevice.powerRatings[0]?i("div",[e._v(e._s(e.thisDevice.powerRatings[0].power))]):e._e()])],1),i("q-card",{staticStyle:{width:"90vw"}},[i("q-card-media",{staticClass:"relative-position"},[i("img",{staticStyle:{opacity:".9",width:"100px",height:"100px"},attrs:{src:"https://www.boid.com/media/boid/science-magnifying-glass-dna-cell.svg"}}),i("h6",{staticClass:"absolute-bottom-right text-grey-7",staticStyle:{margin:"20px"}},[e._v("Fight Childhood Cancer")])]),e.toggle?i("q-card-main",[e.activeTasks.length>0?i("p",[e._v("Active Tasks")]):i("p",[e._v("Downloading Tasks....")]),e._l(e.activeTasks,function(t,a){return e.activeTasks.length>0?i("div",{key:t.slot[0]},[i("q-progress",{attrs:{buffer:0,height:20,stripe:"stripe",animate:"animate",percentage:100*parseFloat(t.checkpoint_fraction_done[0])}})],1):e._e()})],2):e._e(),i("q-card-separator"),i("q-card-actions",{staticClass:"taller relative-position"},[e.toggle?i("q-spinner-grid",{staticClass:"inline on-right absolute-right",staticStyle:{right:"70px",top:"20px"},attrs:{size:20,color:"grey-4"}}):e._e(),i("q-toggle",{staticClass:"absolute-right",staticStyle:{padding:"20px"},attrs:{color:"green",disable:e.pending},model:{value:e.toggle,callback:function(t){e.toggle=t},expression:"toggle"}})],1)],1)],1)])},staticRenderFns:[]};t.a=a}});